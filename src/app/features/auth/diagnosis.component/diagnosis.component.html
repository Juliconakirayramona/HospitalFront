<div class="container">

  <!-- Barra superior con t√≠tulo y bot√≥n -->
  <div class="top-bar">
    <h2>Diagn√≥sticos</h2>

    <button
      class="btn-primary"
      (click)="createNewDiagnosis()"
      [disabled]="loading"
    >
      + Crear diagn√≥stico
    </button>
  </div>

  <!-- Formulario sencillo -->
  <div class="form-row">
    <div class="form-field">
      <label for="userInfoId">Descripci√≥n</label>
      <input
        id="userInfoId"
        type="text"
        [(ngModel)]="selecteddiagnosis_description"
        name="userInfoId"
        placeholder="Descripci√≥n de Diagn√≥stico"
      />
    </div>

    <div class="form-field">
      <label for="bloodType">Fecha de Diagn√≥stico</label>
       <input
        id="userInfoId"
        type="text"
        [(ngModel)]="selecteddiagnosis_date"
        name="userInfoId"
        placeholder="Fecha de Diagn√≥stico"
      />
    </div>
  </div>

  <!-- Mensajes -->
  <div *ngIf="loading" class="status loading">
    Cargando Diagn√≥sticos...
  </div>

  <div *ngIf="errorMsg" class="status error">
    {{ errorMsg }}
  </div>

  <!-- Tabla -->
  <table class="patients-table" *ngIf="!loading && !errorMsg && diagnosis.length">
    <thead>
      <tr>
        <th>ID</th>
        <th>Fecha de Diagn√≥sticos</th>
        <th>Descripci√≥n de Diagn√≥sticos</th>
        <th>Editar Diagn√≥stico</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let d of diagnosis">
        <td>{{ d.id_diagnosis }}</td>
        <td>{{ d.diagnosis_date }}</td>
        <td>{{ d.diagnosis_description }}</td>
        
        <td>
        <input
          [(ngModel)]="d.diagnosis_description"
          name="blood-{{ d.id_diagnosis }}"
          class="blood-input"
        />
      </td>

      <td>
        <button
          class="icon-button"
          (click)="updateDiagnosis(d)"
          [disabled]="loading"
          title="Actualizar diagn√≥stico"
        >
          ‚úèÔ∏è
        </button>
         <button
          class="icon-button danger"
          (click)="onDeleteDiagnosis(d)"
          [disabled]="loading"
          title="Eliminar diagn√≥stico"
        >
          üóëÔ∏è
        </button>
      </td>
      </tr>
    </tbody>
  </table>

  <div *ngIf="!loading && !errorMsg && !diagnosis.length">
    No se encontraron Diagn√≥sticos.
  </div>

  <!-- PAGINACI√ìN -->
  <div class="pagination" *ngIf="!loading && !errorMsg && diagnosis.length">
    <button (click)="prevPage()" [disabled]="currentPage === 1">
      ‚Äπ Anterior
    </button>

    <span>P√°gina {{ currentPage }}</span>

    <button (click)="nextPage()" [disabled]="!hasMore">
      Siguiente ‚Ä∫
    </button>
  </div>

</div>
